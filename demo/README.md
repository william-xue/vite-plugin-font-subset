# Vite Font Subset Plugin - Demo

è¿™æ˜¯ `vite-plugin-font-subset` çš„æ¼”ç¤ºé¡¹ç›®ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ Vite + Vue é¡¹ç›®ä¸­ä½¿ç”¨å­—ä½“å­é›†åŒ–æ’ä»¶ã€‚

## ğŸ“¦ åŠŸèƒ½ç‰¹æ€§

- âœ… è‡ªåŠ¨æ‰«æé¡¹ç›®å­—ç¬¦é›†
- âœ… ç”Ÿæˆ WOFF2 æ ¼å¼å­—ä½“å­é›†
- âœ… å¤§å¹…å‡å°å­—ä½“æ–‡ä»¶ä½“ç§¯
- âœ… è‡ªåŠ¨æ³¨å…¥ CSS åˆ° HTML
- âœ… å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒéƒ½æ”¯æŒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd demo
npm install
```

### 2. å‡†å¤‡å­—ä½“æ–‡ä»¶

**é‡è¦**ï¼šéœ€è¦å°†å­—ä½“æ–‡ä»¶æ”¾åœ¨ `demo/src/fonts/` ç›®å½•ä¸‹ã€‚

æ¨èä½¿ç”¨æ€æºé»‘ä½“ï¼ˆSource Han Sansï¼‰è¿›è¡Œæµ‹è¯•ï¼š
- ä¸‹è½½åœ°å€ï¼šhttps://github.com/adobe-fonts/source-han-sans/releases
- ä¸‹è½½åå°† `SourceHanSansCN-Regular.otf` æ”¾å…¥ `demo/src/fonts/` ç›®å½•

æˆ–è€…ä½¿ç”¨å…¶ä»– `.ttf` / `.otf` å­—ä½“æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹ `vite.config.js` ä¸­çš„é…ç½®ã€‚

### 3. è¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

æµè§ˆå™¨è®¿é—® http://localhost:5173

**å¼€å‘æ¨¡å¼è¯´æ˜**ï¼š
- æ’ä»¶ä¼šåœ¨ `src/fonts/subset/` ç›®å½•ç”Ÿæˆå­—ä½“å­é›†
- åŒæ—¶ç”Ÿæˆ `font.css` æ–‡ä»¶
- è¿™äº›æ–‡ä»¶å¯ä»¥æ‰‹åŠ¨å¼•å…¥è¿›è¡Œå¼€å‘è°ƒè¯•

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

**æ„å»ºå**ï¼š
- å­—ä½“å’Œ CSS ä¼šè¾“å‡ºåˆ° `dist/assets/fonts/` ç›®å½•
- CSS ä¼šè‡ªåŠ¨æ³¨å…¥åˆ° HTML çš„ `<head>` ä¸­
- æŸ¥çœ‹ `dist/` ç›®å½•ï¼Œå­—ä½“æ–‡ä»¶ä½“ç§¯ä¼šå¤§å¹…å‡å°

### 5. é¢„è§ˆæ„å»ºç»“æœ

```bash
npm run preview
```

æµè§ˆå™¨è®¿é—®é¢„è§ˆåœ°å€æŸ¥çœ‹æ•ˆæœã€‚

## âš™ï¸ é…ç½®è¯´æ˜

åœ¨ `vite.config.js` ä¸­é…ç½®æ’ä»¶ï¼š

```javascript
import fontSubsetPlugin from '../src/index.js'

export default defineConfig({
  plugins: [
    vue(),
    fontSubsetPlugin({
      // å­—ä½“é…ç½®
      fonts: [
        {
          src: 'src/fonts/SourceHanSansCN-Regular.otf', // å­—ä½“æ–‡ä»¶è·¯å¾„
          family: 'Source Han Sans CN',                  // CSS font-family åç§°
          weight: 400,                                    // å­—é‡
          style: 'normal'                                 // æ ·å¼
        }
      ],
      
      // æ‰«æå“ªäº›æ–‡ä»¶æ¥æ”¶é›†å­—ç¬¦
      scanDirs: ['src/**/*.{vue,js,ts,jsx,tsx,html}'],
      
      // è¾“å‡ºç›®å½•ï¼ˆç›¸å¯¹äºæºå­—ä½“æ–‡ä»¶ï¼‰
      outputDir: 'subset',
      
      // æ˜¯å¦ç”Ÿæˆ CSS æ–‡ä»¶
      generateCss: true,
      
      // æ˜¯å¦è‡ªåŠ¨æ³¨å…¥ CSS åˆ° HTMLï¼ˆç”Ÿäº§æ„å»ºï¼‰
      injectCss: true,
      
      // é¢å¤–éœ€è¦åŒ…å«çš„å­—ç¬¦
      extraChars: '',
      
      // æ˜¯å¦å¯ç”¨ï¼ˆé»˜è®¤ä»…ç”Ÿäº§æ„å»ºå¯ç”¨ï¼‰
      enabled: true
    })
  ]
})
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
demo/
â”œâ”€â”€ index.html           # HTML å…¥å£
â”œâ”€â”€ package.json         # ä¾èµ–é…ç½®
â”œâ”€â”€ vite.config.js       # Vite é…ç½®ï¼ˆå«æ’ä»¶é…ç½®ï¼‰
â””â”€â”€ src/
    â”œâ”€â”€ main.js          # åº”ç”¨å…¥å£
    â”œâ”€â”€ App.vue          # ä¸»ç»„ä»¶
    â”œâ”€â”€ style.css        # å…¨å±€æ ·å¼
    â””â”€â”€ fonts/
        â”œâ”€â”€ SourceHanSansCN-Regular.otf  # æºå­—ä½“æ–‡ä»¶ï¼ˆéœ€è‡ªè¡Œä¸‹è½½ï¼‰
        â””â”€â”€ subset/                       # æ’ä»¶ç”Ÿæˆçš„å­—ä½“å­é›†ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
            â”œâ”€â”€ SourceHanSansCN-Regular.woff2
            â””â”€â”€ font.css
```

## ğŸ¯ ä½¿ç”¨æ•ˆæœ

### å¼€å‘æ¨¡å¼

è¿è¡Œ `npm run dev` åï¼š

1. æ’ä»¶æ‰«æ `src/**/*.{vue,js,ts,jsx,tsx,html}` æ–‡ä»¶
2. æ”¶é›†æ‰€æœ‰ä½¿ç”¨çš„å­—ç¬¦
3. ç”Ÿæˆå­—ä½“å­é›†åˆ° `src/fonts/subset/`
4. ç”Ÿæˆ `font.css` æ–‡ä»¶

ä½ å¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨å¼•å…¥ï¼š
```javascript
import './fonts/subset/font.css'
```

### ç”Ÿäº§æ„å»º

è¿è¡Œ `npm run build` åï¼š

1. æ’ä»¶æ‰§è¡Œç›¸åŒçš„å­—ç¬¦æ”¶é›†
2. å°†å­—ä½“å­é›†è¾“å‡ºåˆ° `dist/assets/fonts/`
3. å°† CSS è¾“å‡ºåˆ° `dist/assets/fonts/`
4. **è‡ªåŠ¨åœ¨ HTML ä¸­æ³¨å…¥ `<link>` æ ‡ç­¾**

æ— éœ€æ‰‹åŠ¨å¼•å…¥ï¼Œå­—ä½“ä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼

## ğŸ“Š æ•ˆæœå¯¹æ¯”

| é¡¹ç›® | åŸå§‹å­—ä½“ | å­é›†å­—ä½“ | å‹ç¼©ç‡ |
|------|---------|---------|--------|
| æ€æºé»‘ä½“ Regular | ~15 MB | ~100-500 KB | 96-98% |

*å®é™…å¤§å°å–å†³äºé¡¹ç›®ä¸­ä½¿ç”¨çš„å­—ç¬¦æ•°é‡*

## ğŸ’¡ æç¤º

1. **å­—ä½“æ–‡ä»¶è·¯å¾„**ï¼šç¡®ä¿ `vite.config.js` ä¸­çš„ `src` è·¯å¾„æ­£ç¡®
2. **å­—ä½“æ—åç§°**ï¼š`family` éœ€è¦ä¸ CSS ä¸­ä½¿ç”¨çš„ `font-family` ä¸€è‡´
3. **æ‰«æè·¯å¾„**ï¼šæ ¹æ®é¡¹ç›®å®é™…æƒ…å†µè°ƒæ•´ `scanDirs` é…ç½®
4. **å¤šå­—ä½“æ”¯æŒ**ï¼šå¯ä»¥åœ¨ `fonts` æ•°ç»„ä¸­é…ç½®å¤šä¸ªå­—ä½“

## ğŸ”§ æ•…éšœæ’é™¤

### å­—ä½“æœªç”Ÿæ•ˆ

1. æ£€æŸ¥å­—ä½“æ–‡ä»¶æ˜¯å¦å­˜åœ¨äº `src/fonts/` ç›®å½•
2. æ£€æŸ¥ `vite.config.js` ä¸­çš„è·¯å¾„é…ç½®
3. æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œç¡®è®¤æ’ä»¶æ˜¯å¦æ­£å¸¸æ‰§è¡Œ
4. è¿è¡Œç”Ÿäº§æ„å»º `npm run build`ï¼ˆæ’ä»¶é»˜è®¤ä»…åœ¨æ„å»ºæ—¶å¯ç”¨ï¼‰

### å­—ä½“æ–‡ä»¶è¿‡å¤§

- æ£€æŸ¥æ˜¯å¦æœ‰ä¸å¿…è¦çš„æ–‡ä»¶è¢«æ‰«æ
- è°ƒæ•´ `scanDirs` é…ç½®ï¼Œæ’é™¤ä¸éœ€è¦çš„æ–‡ä»¶

## ğŸ“š æ›´å¤šæ–‡æ¡£

æŸ¥çœ‹ä¸»é¡¹ç›® READMEï¼š[../README.md](../README.md)

## ğŸ™‹ é—®é¢˜åé¦ˆ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·åœ¨ GitHub ä»“åº“æ Issueï¼š
https://github.com/william-xue/vite-plugin-font-subset/issues
